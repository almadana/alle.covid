margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#b33018","#14b74b","#000080"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp + scale_shape_manual(values=c(1,4,4))
plot_slopes$sp + scale_shape_manual(values=c(4,4,1))
plot_slopes$sp + scale_shape_manual(values=c(20,20,1))
plot_slopes$sp + scale_shape_manual(values=c(20,20,1)) +
scale_size_manual(values=c(1,1,4))
plot_slopes$sp + scale_shape_manual(values=c(20,20,1)) +
scale_size_manual(values=c(1,1,8))
plot_slopes$sp + scale_shape_manual(values=c(20,20,1)) +
scale_size_manual(values=c(.1,.1,8))
plot_slopes$sp + scale_shape_manual(values=c(20,20,1)) +
scale_size_manual(values=c(12,12,8))
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha=.7,
margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#b33018","#14b74b","#000080"),
ylim=ylims,
xlim=xlims
)
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha=.7,
margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#b33018","#14b74b","#000080"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp + scale_shape_manual(values=c(20,20,1)) +
scale_size_manual(values=c(.1,.1,8))
plot_slopes$sp + scale_shape_manual(values=c(20,20,1)) +
scale_size_manual(values=c(1,1,4))
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha=.3,
margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#b33018","#14b74b","#000080"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp + scale_shape_manual(values=c(20,20,1)) +
scale_size_manual(values=c(1,1,4))
plot_slopes$sp + scale_shape_manual(values=c(20,20,20)) +
scale_size_manual(values=c(1,1,4))
plot_slopes$sp + scale_shape_manual(values=c(20,20,20)) +
scale_size_manual(values=c(1,1,1))
plot_slopes$sp + scale_shape_manual(values=c(20,20,20)) +
scale_size_manual(values=c(2,2,2))
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(20,20,20)) +
scale_size_manual(values=c(2,2,2))
plot_slopes$sp$labels$colour=""
plot_slopes$sp$labels$fill=""
plot_slopes$yplot=plot_slopes$yplot + ylim(ylims)
plot_slopes$xplot=plot_slopes$xplot + ylim(xlims)
plot_slopes=print(plot_slopes)
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(1,1,1)) +
scale_size_manual(values=c(2,2,2))
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha=.3,
margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#b33018","#14b74b","#000080"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(1,1,1)) +
scale_size_manual(values=c(2,2,2))
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha=.3,
margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#b33018","#14b74b","#000080"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(1,1,1)) +
scale_size_manual(values=c(2,2,2))
plot_slopes$sp
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha=.4,
margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#b33018","#14b74b","#000080"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(1,1,1)) +
scale_size_manual(values=c(2,2,2))
plot_slopes$sp
plot_slopes$sp$labels$colour=""
plot_slopes$sp$labels$fill=""
plot_slopes$yplot=plot_slopes$yplot + ylim(ylims)
plot_slopes$xplot=plot_slopes$xplot + ylim(xlims)
plot_slopes=print(plot_slopes)
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha=.4,
margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#b33018","#14b74b","#000080"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(1,1,4)) +
scale_size_manual(values=c(2,2,2))
plot_slopes$sp
plot_slopes$sp$labels$colour=""
plot_slopes$sp$labels$fill=""
plot_slopes$yplot=plot_slopes$yplot + ylim(ylims)
plot_slopes$xplot=plot_slopes$xplot + ylim(xlims)
plot_slopes=print(plot_slopes)
xlims=c(0,.35)
ylims= c(-.01,2)
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha=.4,
#margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#b33018","#14b74b","#000080"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(1,1,4)) +
scale_size_manual(values=c(2,2,2))
plot_slopes$sp
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha=.4,
#margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#b33018","#14b74b","#000080"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(20,20,4)) +
scale_size_manual(values=c(2,2,2))
plot_slopes$sp$labels$colour=""
plot_slopes$sp$labels$fill=""
plot_slopes$yplot=plot_slopes$yplot + ylim(ylims)
plot_slopes$xplot=plot_slopes$xplot + ylim(xlims)
plot_slopes=print(plot_slopes)
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha=.4,
#margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#b33018","#14b74b","#000080"),
ylim=ylims,
xlim=xlims
)
desc(c("oro","plua","jot"))
desc(3,4,1)
desc(c(3,4,1))
?desc
dplyr::desc(c(3,1,5))
bb$allee.f=factor("U.S. counties",levels = c("U.S. counties",levels(cuadrantes$allee.f)))
sim_bb = merge(cuadrantes[,c("Id","n","allee.f","initial.slope","slope.after.thresh","cociente")],bb,by=c("Id","allee.f","initial.slope","slope.after.thresh","cociente"),all=T)
xlims=c(0,.35)
ylims= c(-.01,2)
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
mutate(allee.f,forcats::fct_re)
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha=.4,
margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#b33018","#14b74b","#000080"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(20,20,4)) +
scale_size_manual(values=c(2,2,2))
plot_slopes$sp
levels(sim_bb$allee.f)
bb$allee.f=factor("U.S. counties",levels = c("U.S. counties",levels(cuadrantes$allee.f)))
bb$allee.f
cuadrantes$allee.f
sim_bb = merge(cuadrantes[,c("Id","n","allee.f","initial.slope","slope.after.thresh","cociente")],bb,by=c("Id","allee.f","initial.slope","slope.after.thresh","cociente"),all=T)
sim_bb$allee.f
sim_bb$allee.f=relevel(sim_bb$allee.f,"U.S. counties")
sim_bb$allee.f
xlims=c(0,.35)
ylims= c(-.01,2)
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha=.4,
margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#b33018","#14b74b","#000080"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(20,20,4)) +
scale_size_manual(values=c(2,2,2))
plot_slopes$sp
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(4,20,20)) +
scale_size_manual(values=c(2,2,2))
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha=.4,
margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#b33018","#14b74b","#000080"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(4,20,20)) +
scale_size_manual(values=c(2,2,2))
plot_slopes$sp$labels$colour=""
plot_slopes$sp$labels$fill=""
plot_slopes$yplot=plot_slopes$yplot + ylim(ylims)
plot_slopes$xplot=plot_slopes$xplot + ylim(xlims)
plot_slopes=print(plot_slopes)
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha=.4,
margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#000080","#b33018","#14b74b"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(4,20,20)) +
scale_size_manual(values=c(2,2,2))
plot_slopes$sp$labels$colour=""
plot_slopes$sp$labels$fill=""
plot_slopes$yplot=plot_slopes$yplot + ylim(ylims)
plot_slopes$xplot=plot_slopes$xplot + ylim(xlims)
plot_slopes=print(plot_slopes)
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha=.4,
margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#000080","#b33018","#14b74b"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(4,20,20)) +
scale_size_manual(values=c(4,2,2))
plot_slopes$sp
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha="allee.f",
alpha=.4,
margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#000080","#b33018","#14b74b"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(4,20,20)) +
scale_size_manual(values=c(4,2,2))+scale_alpha_manual(values=c(.6,.3,.3))
plot_slopes$sp
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha="allee.f",
alpha=.4,
margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#000080","#b33018","#14b74b"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(4,20,20)) +
scale_size_manual(values=c(4,2,2))+scale_alpha_manual(values=c(.5,.3,.3))
plot_slopes$sp
plot_slopes$sp$labels$colour=""
plot_slopes$sp$labels$fill=""
plot_slopes$yplot=plot_slopes$yplot + ylim(ylims)
plot_slopes$xplot=plot_slopes$xplot + ylim(xlims)
plot_slopes=print(plot_slopes)
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha="allee.f",
alpha=.4,
margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#000080","#b33018","#14b74b"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(4,20,20)) +
scale_size_manual(values=c(2,2,2))+scale_alpha_manual(values=c(.5,.3,.3))
plot_slopes$sp
plot_slopes$sp$labels$colour=""
plot_slopes$sp$labels$fill=""
plot_slopes$yplot=plot_slopes$yplot + ylim(ylims)
plot_slopes$xplot=plot_slopes$xplot + ylim(xlims)
plot_slopes=print(plot_slopes)
plot_slopes=
sim_bb %>% mutate_at(vars(contains("slope"),"cociente"),.funs = list("log10"=function(x) log10(1+x))) %>%
#filtra a los que no tiene quiebre de pendientes positivo (ratio mayor a uno)
filter(cociente>1) %>%
ggscatterhist(x="initial.slope_log10",y="cociente_log10",
#color="bajoUmbral",
color="allee.f",
fill="allee.f",
shape="allee.f",
size="allee.f",
alpha="allee.f",
alpha=.4,
margin.plot="boxplot",
ggtheme=theme_bw(),
xlab="log10(1+initial slope)",
ylab="log10(1+slope after threshold/initial slope)",
palette = c("#000080","#b33018","#14b74b"),
ylim=ylims,
xlim=xlims
)
plot_slopes$sp = plot_slopes$sp + scale_shape_manual(values=c(4,20,20)) +
scale_size_manual(values=c(2,2,2))+scale_alpha_manual(values=c(.5,.3,.3)) +
geom_abline(slope=0,intercept = log10(2),linetype="dotted") #+
plot_slopes$sp$labels$colour=""
plot_slopes$sp$labels$fill=""
plot_slopes$yplot=plot_slopes$yplot + ylim(ylims)
plot_slopes$xplot=plot_slopes$xplot + ylim(xlims)
plot_slopes=print(plot_slopes)
